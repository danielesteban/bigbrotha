(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{"/sCo":function(t,e,n){t.exports=n.p+"assets/93127487a737311625b8f17799c01111.weights"},0:function(t,e,n){n("p2bk"),t.exports=n("tjUo")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},OwmF:function(t,e,n){t.exports=n.p+"assets/4ba312eae62dae3b218b93b9b0ed4b21.ogg"},p2bk:function(t,e,n){},tjUo:function(t,e,n){"use strict";n.r(e);var r=n("z6TK"),o=n("Womt");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!e.supportGeometry){var i=new o.e(.1,2,.05,1,1,1);i.faces.forEach(function(t,e){e%2==1&&(t.color.offsetHSL(0,0,-.1*Math.random()),i.faces[e-1].color.copy(t.color))}),i.translate(0,.3,0),e.supportGeometry=(new o.g).fromGeometry(i)}e.supportMaterial||(e.supportMaterial=new o.q({color:3355443,vertexColors:o.G})),n=a(this,c(e).call(this));var s=new r.c(t);s.position.y+=1.48;var u=new o.p(e.supportGeometry,e.supportMaterial);return n.add(s),n.add(u),n.intersects=[s,u],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o["r"]),e}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new o.j;return(t=l(this,p(e).call(this,{generator:function(t){var e=t.x,r=t.y,o=t.z,i=Math.random()>=.5;return 0===e||1===e&&i||31===e||30===e&&i||0===o||1===o&&i||31===o||30===o&&i||31===r?(n.setHex(3355443).offsetHSL(.2*Math.random()-.2,.2*Math.random()-.2,.2*Math.random()-.2),1<<24|(255*n.r&255)<<16|(255*n.g&255)<<8|255*n.b&255):0},size:32}))).scale.set(5,10,5),t.position.set(-16,-16,-16).multiply(t.scale),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,r["d"]),e}(),y=n("qzk7"),b=n("/sCo"),m=n.n(b);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.video=document.createElement("video"),this.video.onloadedmetadata=function(){e.isReady=!0},this.options=new y.a,this.loadModel()}var e,n,r;return e=t,(n=[{key:"getUserMedia",value:function(){var t=this.video;return navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){t.srcObject=e,t.play()}).catch(this.getUserMedia.bind(this))}},{key:"loadModel",value:function(){var t=this;return Object(y.c)(m.a).then(function(e){return y.d.tinyFaceDetector.load(e).then(t.getUserMedia.bind(t))})}},{key:"render",value:function(t){var e=t.display,n=t.tint,r=this.options,o=this.video;return Object(y.b)(o,r).then(function(t){if(t){var r=t.box,i=Math.max(r.x-.25*r.width,0),a=Math.max(r.y-.25*r.height,0),c=Math.min(1.5*r.width,o.videoHeight-i),s=Math.min(1.5*r.height,o.videoHeight-a),u=0,f=0,l=e.renderer.width,p=e.renderer.height;c<s?(p=s*l/c,f=.5*e.renderer.height-.5*p):(l=c*p/s,u=.5*e.renderer.width-.5*l),e.context.drawImage(o,i,a,c,s,u,f,l,p),n&&(e.context.fillStyle=n,e.context.fillRect(0,0,e.renderer.width,e.renderer.height)),e.texture.needsUpdate=!0}})}}])&&v(e.prototype,n),r&&v(e,r),t}()),w=n("OwmF"),O=n.n(w);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=[{path:"/(level1)?",scene:function(t){function e(t){var n,i,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,c=_(e).call(this,t),i=!c||"object"!==M(c)&&"function"!=typeof c?S(a):c;var s=t.engine;s.setAmbientSounds([O.a]),s.setBackgroundColor(1052704),s.camera.fov=75,s.camera.updateProjectionMatrix(),s.camera.lookAt(0,1.8275,-1),s.camera.room.position.set(0,.5,-1);var f=new d;i.add(f);var l=16,p=new r.d({generator:function(t){var e=t.x,n=t.y,r=t.z;if(0===n||e>=7&&e<=8&&(n<3&&r>=6&&r<=7||n<2&&r>=8&&r<=9)){var o=26*(1-.6*Math.random());return 3<<24|Math.floor(.5*o)<<16|Math.floor(.5*o)<<8|o}return 0},size:l,texture:i.voxelsTexture});p.scale.set(1,.5,1),p.position.set(-.5*l,-1,-.5*l),i.add(p),i.intersects.push(p),[{position:[0,-.5,0],width:l,height:l},{position:[0,0,1],width:2,height:2},{position:[0,.5,-1],width:2,height:2}].forEach(function(t){var e,n=t.position,o=t.width,a=t.height,c=new r.a({width:o,height:a});(e=c.position).set.apply(e,x(n)),c.material.visible=!1,c.position.y+=.001,i.add(c),i.intersects.push(c)});var h=new u({buttons:[{label:"Big brotha",x:18,y:103,width:220,height:50,onPointer:function(){}}],graphics:[function(t){for(var e=t.ctx,n=0;n<128;n+=1){var r=256*Math.random(),o=256*Math.random(),i=256*(.3*Math.random()+.5);e.fillStyle="rgba(".concat(i,", ").concat(i,", ").concat(i,", .5)"),e.beginPath(),e.arc(r,o,5*Math.random()+1,0,2*Math.PI),e.fill()}}],styles:{button:{background:"#393"}}});h.position.set(2.5,-.25,-2.5),h.lookAt(0,1.25,0),i.add(h),(n=i.intersects).push.apply(n,x(h.intersects)),i.displays=[];for(var y=0;y<6;y+=1)for(var b=7+.5*y,m=function(t){var e=new o.r,n=new r.c({labels:[{x:128,y:128,color:"rgba(255, 255, 255, 0.25)",text:"NO SIGNAL"}],width:1,height:1}),a=.8+.15*Math.random();n.scale.set(a,a,a),i.displays.push(n);var c=Math.random()+.5,s=Math.random()+.5;n.rotation.order="YXZ",n.onBeforeRender=function(t){var e=t.animation.time;n.rotation.x=.2*Math.sin(e*c),n.rotation.y=.2*Math.sin(e*s)},e.add(n);var u=Math.PI+(t-4.5)/11*Math.PI*.5,f=(y+1.5)/7*Math.PI*.25;e.position.set(b*Math.sin(u)*Math.cos(f),b*Math.sin(f),b*Math.cos(u)*Math.cos(f)),e.lookAt(0,3,0),i.add(e)},v=0;v<10;v+=1)m(v);return i.displayIndex=0,i.displays.sort(function(){return Math.random()-.5}),i.renderFace=i.renderFace.bind(S(i)),i.renderFace(),i}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,r["b"]),n=e,(i=[{key:"renderFace",value:function(){var t=this,e=this.displays,n=this.displayIndex;if(g.isReady){var r=e[n];this.displayIndex+=1,this.displayIndex>=e.length&&(this.displayIndex=0,e.sort(function(){return Math.random()-.5})),g.render({display:r,tint:"rgba(16, 16, 32, 0.5)"}).then(function(){t.renderFaceTimeout=setTimeout(t.renderFace)})}else this.renderFaceTimeout=setTimeout(this.renderFace)}},{key:"dispose",value:function(){P(_(e.prototype),"dispose",this).call(this),clearTimeout(this.renderFaceTimeout)}}])&&j(n.prototype,i),a&&j(n,a),e}()},{path:"/level2",scene:function(t){function e(t){var n,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,n=!(a=R(e).call(this,t))||"object"!==k(a)&&"function"!=typeof a?I(i):a;var c=t.engine;c.setBackgroundColor(1052704),c.camera.fov=75,c.camera.updateProjectionMatrix();var s=new r.d({generator:function(t){var e=t.x,n=t.y,r=t.z;if(0===n||1===n&&(0===e||7===e||0===r||7===r)){var o=26*(1-.6*Math.random());return 3<<24|Math.floor(.5*o)<<16|Math.floor(.5*o)<<8|o}return 0},size:8,texture:n.voxelsTexture});s.scale.set(1,.5,1),s.position.set(-4,-1,-4),n.add(s),n.intersects.push(s);var u=new r.a({width:6,height:6});u.material.visible=!1,u.position.y+=.001,n.add(u),n.intersects.push(u),n.displays=[];for(var f=[],l=0;l<128;l+=1){var p=new o.r,h=new r.c({labels:[{x:128,y:128,color:"rgba(255, 255, 255, 0.25)",text:"NO SIGNAL"}],width:1,height:1}),d=2+.5*Math.random();h.scale.set(d,d,d),n.displays.push(h),p.add(h);var y=l/128*Math.PI*16;p.position.set(8*Math.cos(y),8*Math.sin(y)+6,-1*l),p.lookAt(0,1.6,p.position.z+2),n.add(p),f.push(p)}return n.animations.push(function(t){var e=t.delta;f.forEach(function(t){t.position.z+=4*e,t.position.z>=32&&(t.position.z-=128)})}),n.displayIndex=0,n.displays.reverse(),n.renderFace=n.renderFace.bind(I(n)),n.renderFace(),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,r["b"]),n=e,(i=[{key:"renderFace",value:function(){var t=this,e=this.displays,n=this.displayIndex;if(g.isReady){var r=e[n];this.displayIndex+=1,this.displayIndex>=e.length&&(this.displayIndex=0),g.render({display:r,tint:"rgba(16, 16, 32, 0.5)"}).then(function(){t.renderFaceTimeout=setTimeout(t.renderFace)})}else this.renderFaceTimeout=setTimeout(this.renderFace)}},{key:"dispose",value:function(){E(R(e.prototype),"dispose",this).call(this),clearTimeout(this.renderFaceTimeout)}}])&&F(n.prototype,i),a&&F(n,a),e}()}];Object(r.e)({basename:"/",mount:document.getElementById("mount"),scenes:A})}},[[0,1,2]]]);
//# sourceMappingURL=main.58cf8749dc7468fa1a57d3c8dc5800e9.js.map